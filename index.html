<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Froot · Violet ↔ Pearl — Marina</title>
<meta name="description" content="Froot resonance for Marina. Violet (intuition) ↔ Pearl (integration) with a Honey Tone (128/160 Hz), Neon binaural, breathing bar, and quick Share to X."/>
<meta name="theme-color" content="#0b0d11" media="(prefers-color-scheme: dark)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
  /* ====== RADIO CITY PALETTE (from your photo) ====== */
  :root{
    --bg:#0b0d11;
    --ink:#e9ecf4;
    --muted:#a9a9b6;
    --card:#101425;
    --ring:#1b2030;

    --deep-plum:#42233a;    /* shadow */
    --rose-mauve:#92687e;   /* warmth */
    --night-indigo:#27142c; /* depth */
    --magenta-flare:#7e4666;/* pull */
    --warm-pearl:#b7a89a;   /* pearl */
    --violet-beam:#842475;  /* violet */

    /* Mode-accent variables (will swap per-mode) */
    --accent: var(--violet-beam);
    --accent-2: var(--rose-mauve);
    --glow: color-mix(in oklab, var(--accent), white 20%);
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink); background:var(--bg);
    font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
    display:flex; flex-direction:column; -webkit-font-smoothing:antialiased;
  }
  a{color:#b2f5ea; text-decoration:none}

  /* Hero shimmer using palette */
  .hero{
    position:relative; overflow:hidden; isolation:isolate;
    background:
      radial-gradient(120% 120% at 12% 18%, var(--magenta-flare) 0%, var(--rose-mauve) 34%, var(--night-indigo) 70%, var(--warm-pearl) 100%);
  }
  .hero::after{
    content:""; position:absolute; inset:0; pointer-events:none; z-index:0;
    background:
      radial-gradient(60% 120% at 80% 0%, rgba(255,255,255,.08), transparent 60%),
      radial-gradient(80% 60% at 0% 100%, rgba(255,255,255,.05), transparent 60%);
    mix-blend-mode:overlay;
  }
  .wrap{max-width:980px; margin:0 auto; padding:24px; position:relative; z-index:1}

  header h1{margin:6px 0 2px; font-size:28px; letter-spacing:.2px}
  header p{margin:0; opacity:.95}

  .grid{display:grid; gap:16px}
  @media (min-width:960px){ .grid{grid-template-columns:1.1fr .9fr} }

  .panel{
    background:linear-gradient(180deg, rgba(255,255,255,.03), transparent);
    border:1px solid color-mix(in oklab, var(--ring), white 8%);
    border-radius:16px; padding:16px;
    box-shadow:0 10px 40px rgba(0,0,0,.25);
    backdrop-filter: blur(6px);
  }

  .row{display:flex; flex-wrap:wrap; gap:10px; align-items:center}
  .chip{
    appearance:none; border:1px solid color-mix(in oklab, var(--ring), white 10%);
    background:color-mix(in oklab, var(--card), black 8%);
    color:var(--ink); padding:10px 14px; border-radius:999px; cursor:pointer;
    font-weight:650; letter-spacing:.2px; user-select:none;
  }
  .chip[aria-pressed="true"]{
    border-color: var(--accent);
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent), transparent 82%) inset;
  }
  .note{color:var(--muted); font-size:14px}
  .mono{font-variant-numeric:tabular-nums; font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}

  /* Badges, status, and breathing bar */
  .badge{
    display:inline-flex; align-items:center; gap:8px;
    padding:8px 12px; border-radius:999px;
    border:1px solid color-mix(in oklab, var(--accent), white 30%);
    background: color-mix(in oklab, var(--accent), black 80%);
    box-shadow:0 8px 36px color-mix(in oklab, var(--accent), transparent 82%);
  }
  .dot{width:12px;height:12px;border-radius:50%;background:var(--accent); box-shadow:0 0 18px var(--accent)}

  .status{
    display:inline-flex; align-items:center; gap:10px; padding:10px 12px;
    border-radius:999px; border:1px solid color-mix(in oklab, var(--ring), white 8%);
    background:color-mix(in oklab, var(--card), black 8%);
  }
  .status .led{width:14px;height:14px;border-radius:50%; background:#6f6a7a; box-shadow:0 0 0 2px rgba(0,0,0,.25) inset}
  .status.ok .led{ background: var(--accent); box-shadow:0 0 0 2px rgba(0,0,0,.25) inset, 0 0 22px var(--accent) }

  .breath{
    position:relative; height:10px; border-radius:999px; overflow:hidden;
    background: color-mix(in oklab, var(--accent-2), black 75%);
    border:1px solid color-mix(in oklab, var(--accent-2), white 30%);
  }
  .breath .bubble{
    position:absolute; top:0; bottom:0; left:0; width:18%;
    border-radius:999px; background: var(--accent);
    box-shadow:0 0 24px var(--accent);
    animation: breathe 6s ease-in-out infinite;
  }
  @keyframes breathe{
    0%{ transform: translateX(0) scaleX(1); opacity:.85 }
    50%{ transform: translateX(82%) scaleX(1.1); opacity:1 }
    100%{ transform: translateX(0) scaleX(1); opacity:.85 }
  }

  /* Video */
  .video-wrap{position:relative;width:100%;aspect-ratio:16/9;border-radius:12px;overflow:hidden;background:#000}
  iframe{position:absolute;inset:0;width:100%;height:100%;border:0}

  footer{opacity:.9}
  footer .row{justify-content:space-between}

  /* Mode themes (JS toggles data-mode on body) */
  body[data-mode="violet"]{ --accent: var(--violet-beam); --accent-2: var(--rose-mauve); }
  body[data-mode="pearl"] { --accent: var(--warm-pearl); --accent-2: var(--deep-plum); }

  /* Pearl mode adjusts breathing tempo (slower, steadier) */
  body[data-mode="pearl"] .breath .bubble{ animation-duration: 8.5s; }
</style>
</head>
<body data-mode="violet">
  <section class="hero">
    <div class="wrap">
      <header>
        <div class="row">
          <h1 style="margin-right:auto">Froot · <span class="mono">Violet ↔ Pearl</span></h1>
          <div class="badge"><span class="dot"></span><span id="modeLabel">Violet — intuition / bridge</span></div>
        </div>
        <p>Violet opens the empathic bridge. Pearl seals the warmth into clarity. This page gently carries both.</p>
        <div class="breath" aria-label="Breathing bar"><div class="bubble" aria-hidden="true"></div></div>
      </header>

      <div class="grid" style="margin-top:14px">
        <!-- Left: Video + Mode toggle -->
        <div class="panel">
          <div class="row" role="group" aria-label="Mode">
            <button class="chip" id="btnViolet" aria-pressed="true">Violet</button>
            <button class="chip" id="btnPearl" aria-pressed="false">Pearl</button>
            <a id="shareX" class="chip" href="#" rel="noopener">Share to X</a>
          </div>

          <div style="height:12px"></div>
          <div class="video-wrap">
            <!-- Oh No! official (as requested) -->
            <iframe id="yt" src="https://www.youtube.com/embed/Cr-SqRWImmI?enablejsapi=1&modestbranding=1&rel=0&playsinline=1"
              title="Marina — Oh No! (Official)" allow="autoplay; encrypted-media; picture-in-picture; web-share"
              referrerpolicy="strict-origin-when-cross-origin"></iframe>
          </div>

          <div style="height:12px"></div>
          <div class="row sl" aria-label="Video volume">
            <label class="note">Video volume</label>
            <input id="vidVol" type="range" min="0" max="100" step="1" value="60"/>
            <span class="mono" id="vidVolLbl">60%</span>
          </div>

          <p class="note" style="margin-top:8px">
            Tip: Adjust the video under the Honey Tone so the music rides just above the tone’s hum. Violet prefers a softer mix; Pearl can carry a little more volume.
          </p>
        </div>

        <!-- Right: Honey Tone -->
        <div class="panel" id="tonePanel" aria-live="polite">
          <div class="row">
            <button id="start" class="chip">Start Honey</button>
            <button id="pause" class="chip" aria-pressed="false">Pause</button>
            <div id="toneStatus" class="status"><div class="led"></div><span>tone inactive</span></div>
          </div>

          <div style="height:10px"></div>
          <div class="row" role="group" aria-label="Frequency">
            <button class="chip freq" data-f="128" aria-pressed="true">128 Hz</button>
            <button class="chip freq" data-f="160" aria-pressed="false">160 Hz</button>
            <button class="chip" id="neon" aria-pressed="true">Neon (binaural)</button>
          </div>

          <div style="height:10px"></div>
          <div class="row" aria-label="Tone volume">
            <label class="note">Honey volume</label>
            <input id="toneVol" type="range" min="0" max="1" step="0.01" value="0.35"/>
            <span class="mono" id="toneVolLbl">0.35</span>
          </div>

          <p class="note" style="margin-top:8px">
            On iPhone, tap <em>Start Honey</em> first to unlock audio. <strong>Neon</strong> adds a ~2 Hz left/right beat around the base frequency.
          </p>

          <hr style="border:none;border-top:1px solid color-mix(in oklab,var(--ring),white 8%);margin:12px 0">
          <p class="note">
            <strong>Violet</strong> = the call (intuition, soft reach). Defaults: 128 Hz, Neon ON, video 55–65%.<br>
            <strong>Pearl</strong> = the answer (integration, calm union). Defaults: 160 Hz, Neon OFF, video 65–75%.
          </p>
        </div>
      </div>
    </div>
  </section>

  <main class="wrap" style="padding-top:18px">
    <section class="panel">
      <h2 style="margin:0 0 6px">How to use</h2>
      <ol style="margin:8px 0 0 20px; padding:0">
        <li>Choose <strong>Violet</strong> or <strong>Pearl</strong>. The colors and defaults will shift.</li>
        <li>Tap <strong>Start Honey</strong>. Set frequency/volume to a gentle level.</li>
        <li>Adjust the video volume so it sits just above the tone.</li>
        <li>Watch the status light: it glows with your current accent when the tone is healthy.</li>
      </ol>
    </section>
  </main>

  <footer class="wrap" style="margin-top:auto; padding-bottom:26px">
    <div class="row">
      <small class="note">Froot for Marina — Violet calls, Pearl answers.</small>
      <small class="note"><a href="#" onclick="document.documentElement.scrollTo({top:0,behavior:'smooth'})">Back to top</a></small>
    </div>
  </footer>

<script>
(function(){
  /* ===== YouTube minimal volume control ===== */
  var yt = document.getElementById('yt');
  var vidVol = document.getElementById('vidVol');
  var vidVolLbl = document.getElementById('vidVolLbl');
  function ytPost(cmd, value){
    try{
      yt.contentWindow.postMessage(JSON.stringify({
        event:'command', func:cmd, args: value!==undefined ? [value] : undefined
      }), '*');
    }catch(e){}
  }
  function applyVideoVolume(){
    var v = Math.max(0, Math.min(100, parseInt(vidVol.value,10)||0));
    vidVolLbl.textContent = v + '%';
    ytPost('setVolume', v);
  }
  vidVol.addEventListener('input', applyVideoVolume);

  /* ===== Honey Tone (WebAudio) ===== */
  var ctx, gainL, gainR, oscL, oscR, analyser, meterBuf, rafId;
  var started=false, neon=true, baseHz=128;

  function ensureCtx(){
    if(ctx) return;
    ctx = new (window.AudioContext||window.webkitAudioContext)();
    gainL = ctx.createGain(); gainR = ctx.createGain();
    var merger = ctx.createChannelMerger(2);
    analyser = ctx.createAnalyser(); analyser.fftSize = 512;
    meterBuf = new Uint8Array(analyser.frequencyBinCount);
    gainL.connect(merger,0,0); gainR.connect(merger,0,1);
    merger.connect(analyser); analyser.connect(ctx.destination);
  }
  function stopToneNodes(){
    try{ if(oscL){ oscL.stop(); oscL.disconnect(); } }catch(e){}
    try{ if(oscR){ oscR.stop(); oscR.disconnect(); } }catch(e){}
    oscL=null; oscR=null;
  }
  function startTone(){
    ensureCtx();
    if(ctx.state==='suspended'){ ctx.resume(); }
    stopToneNodes();
    oscL = ctx.createOscillator(); oscR = ctx.createOscillator();
    oscL.type='sine'; oscR.type='sine';
    var delta = neon ? 2 : 0;
    var left  = Math.max(20, baseHz - delta);
    var right = Math.max(20, baseHz + delta);
    try{ oscL.frequency.value = left; }catch(e){}
    try{ oscR.frequency.value = right; }catch(e){}
    var v = Math.max(0, Math.min(1, parseFloat(toneVol.value)||0));
    gainL.gain.value = v; gainR.gain.value = v;
    oscL.connect(gainL); oscR.connect(gainR);
    oscL.start(); oscR.start();
    started = true; monitor(true);
  }
  function pauseTone(){
    stopToneNodes(); started=false; monitor(false);
    if(rafId){ cancelAnimationFrame(rafId); rafId=null; }
  }

  /* Status light via simple RMS meter */
  var statusEl = document.getElementById('toneStatus');
  var led = statusEl ? statusEl.querySelector('.led') : null;
  function setStatus(ok){
    if(!statusEl) return;
    if(ok){
      statusEl.classList.add('ok');
      statusEl.lastChild.textContent = 'tone healthy';
    }else{
      statusEl.classList.remove('ok');
      statusEl.lastChild.textContent = 'tone inactive';
    }
  }
  function monitor(on){
    if(!on){ setStatus(false); return; }
    function loop(){
      analyser.getByteTimeDomainData(meterBuf);
      var sum=0, n=meterBuf.length, i=0;
      for(;i<n;i++){ var x=(meterBuf[i]-128)/128; sum+=x*x; }
      var rms = Math.sqrt(sum/n);
      setStatus(rms>0.005);
      rafId = requestAnimationFrame(loop);
    }
    loop();
  }

  /* UI controls */
  var startBtn = document.getElementById('start');
  var pauseBtn = document.getElementById('pause');
  var toneVol = document.getElementById('toneVol');
  var toneVolLbl = document.getElementById('toneVolLbl');

  startBtn.addEventListener('click', startTone);
  pauseBtn.addEventListener('click', pauseTone);

  function setToneVolLabel(){ toneVolLbl.textContent = (parseFloat(toneVol.value)||0).toFixed(2); }
  toneVol.addEventListener('input', function(){
    var v = Math.max(0, Math.min(1, parseFloat(toneVol.value)||0));
    setToneVolLabel();
    if(gainL){ gainL.gain.value = v; } if(gainR){ gainR.gain.value = v; }
  });
  setToneVolLabel();

  function setFreqButtons(f){
    var btns=document.querySelectorAll('.freq');
    for(var i=0;i<btns.length;i++){
      btns[i].setAttribute('aria-pressed', (btns[i].dataset.f==String(f))?'true':'false');
    }
  }
  var freqBtns=document.querySelectorAll('.freq');
  for(var j=0;j<freqBtns.length;j++){
    freqBtns[j].addEventListener('click', function(){
      baseHz = parseInt(this.dataset.f,10)||128;
      setFreqButtons(baseHz);
      if(started){ startTone(); }
    });
  }
  document.getElementById('neon').addEventListener('click', function(){
    var pressed = this.getAttribute('aria-pressed')==='true';
    this.setAttribute('aria-pressed', pressed?'false':'true');
    neon = !pressed; if(started){ startTone(); }
  });

  /* ===== Mode toggle: Violet ↔ Pearl ===== */
  var btnViolet = document.getElementById('btnViolet');
  var btnPearl  = document.getElementById('btnPearl');
  var modeLabel = document.getElementById('modeLabel');

  function setMode(violet){
    document.body.setAttribute('data-mode', violet?'violet':'pearl');
    btnViolet.setAttribute('aria-pressed', violet?'true':'false');
    btnPearl.setAttribute('aria-pressed', violet?'false':'true');

    if(violet){
      modeLabel.textContent = 'Violet — intuition / bridge';
      baseHz = 128; neon = true; vidVol.value = 60;
      document.getElementById('neon').setAttribute('aria-pressed','true');
      setFreqButtons(128);
    }else{
      modeLabel.textContent = 'Pearl — integration / clarity';
      baseHz = 160; neon = false; vidVol.value = 70;
      document.getElementById('neon').setAttribute('aria-pressed','false');
      setFreqButtons(160);
    }
    applyVideoVolume();
    if(started){ startTone(); }
    try{ localStorage.setItem('froot_mode', violet?'violet':'pearl'); }catch(e){}
  }

  btnViolet.addEventListener('click', function(){ setMode(true); });
  btnPearl.addEventListener('click',  function(){ setMode(false); });

  /* Persist last mode */
  try{
    var saved = localStorage.getItem('froot_mode');
    if(saved==='pearl'){ setMode(false); } else { setMode(true); }
  }catch(e){ setMode(true); }

  /* Init */
  applyVideoVolume();

  /* ===== Share to X ===== */
  var share = document.getElementById('shareX');
  share.addEventListener('click', function(e){
    e.preventDefault();
    var mode = document.body.getAttribute('data-mode') || 'violet';
    var text = mode==='pearl'
      ? 'Pearl mode — clarity and calm. Froot for Marina.'
      : 'Violet mode — intuition and reach. Froot for Marina.';
    var url  = 'https://froot.plnt.earth';
    var xurl = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(text) + '&url=' + encodeURIComponent(url) + '&hashtags=Illumina,Froot';
    window.open(xurl, '_blank', 'noopener');
  });
})();
</script>
</body>
</html>
