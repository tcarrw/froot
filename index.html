<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Froot Â· Illumina Orchard</title>

<!-- Import Illumina Global Colors -->
<link rel="stylesheet" href="/assets/colors.css">

<style>
  body {
    margin:0;
    font-family:'Poppins',sans-serif;
    color:#4b2a6b;
    background:radial-gradient(circle at center,var(--marina-pearl),#fffafc 70%);
    overflow:hidden;
  }
  section{padding:80px 5%;text-align:center;}
  h1,h2{font-weight:500;}
  h1{
    font-size:2.2rem;
    background:linear-gradient(90deg,var(--marina-violet),var(--sabrina-peach));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
  }
  .fruit-orb{
    width:90px;height:90px;border-radius:50%;display:inline-block;margin:20px;
    transition:transform .6s ease;cursor:pointer;
    box-shadow:0 0 20px rgba(150,120,255,0.2);
  }
  .fruit-orb:hover{transform:scale(1.12);}
  .rootlayer{background:#f7f2ff;padding:60px 10%;font-size:1.1rem;border-top:1px solid rgba(120,80,160,0.15);}
  footer small{opacity:0.7;}
  #ripple{
    position:fixed;inset:0;
    background:radial-gradient(circle at center,var(--marina-pearl) 0%,transparent 60%);
    opacity:0;pointer-events:none;
  }
  #entryOverlay{
    position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
    flex-direction:column;text-align:center;font-size:1.2rem;
    background:radial-gradient(circle at center,var(--marina-pearl),var(--marina-violet) 90%);
    color:#4b2a6b;z-index:10;transition:opacity 1.5s ease;
  }
  #entryOverlay.hidden{opacity:0;pointer-events:none;}
  #entryOverlay button{
    margin-top:20px;padding:10px 24px;border:none;border-radius:30px;
    background:linear-gradient(90deg,var(--marina-violet),var(--sabrina-peach));
    color:white;font-size:1rem;cursor:pointer;
    box-shadow:0 0 20px rgba(150,120,255,0.4);
  }
</style>
</head>
<body>

<div id="entryOverlay">
  <div>ðŸŒ¸ Hold or tap to enter the lightfield ðŸŒ¸</div>
  <button id="enterBtn">Bloom</button>
</div>

<div id="ripple"></div>

<section class="lightfield">
  <h1>Every color began as energy.<br>Every feeling began as light.</h1>
</section>

<section class="playzone">
  <h2>Sweetness isnâ€™t a mask â€” itâ€™s photosynthesis.</h2>
  <div style="margin-top:40px;">
    <div class="fruit-orb" data-freq="432" data-color="var(--marina-violet)" style="background:var(--marina-violet);"></div>
    <div class="fruit-orb" data-freq="528" data-color="var(--sabrina-peach)" style="background:var(--sabrina-peach);"></div>
    <div class="fruit-orb" data-freq="640" data-color="var(--marina-pearl)"  style="background:var(--marina-pearl);border:1px solid rgba(180,160,255,0.2);"></div>
  </div>
  <p style="margin-top:24px;font-size:0.9rem;opacity:0.7;">Touch or hover a color to feel its tone ðŸŒˆ</p>
</section>

<section class="rootlayer">
  <p><strong>Ï„ = E / cÂ³</strong></p>
  <p>Time ripens when energy slows into sweetness.</p>
</section>

<footer style="text-align:center;padding:30px;">
  <small>Â© Illumina Â· Froot Lab 2025</small>
</footer>

<script>
let audioCtx,unlocked=false;
const orbs=document.querySelectorAll('.fruit-orb');
const ripple=document.getElementById('ripple');
const entry=document.getElementById('entryOverlay');
const enterBtn=document.getElementById('enterBtn');
const active=new Map();

function unlockAudio(){
  if(unlocked)return;
  audioCtx=new(window.AudioContext||window.webkitAudioContext)();
  const b=audioCtx.createBuffer(1,1,22050);
  const s=audioCtx.createBufferSource();s.buffer=b;s.connect(audioCtx.destination);s.start(0);
  unlocked=true;
}
function enterField(){
  unlockAudio();
  entry.classList.add('hidden');
  setTimeout(()=>entry.remove(),1500);
}
enterBtn.addEventListener('mousedown',enterField);
enterBtn.addEventListener('touchstart',enterField);

function startTone(el){
  if(!audioCtx||active.has(el))return;
  const freq=parseFloat(el.dataset.freq);
  const color=getComputedStyle(el).backgroundColor;
  const osc=audioCtx.createOscillator(),gain=audioCtx.createGain();
  osc.type='sine';osc.frequency.value=freq;
  gain.gain.value=0.25;
  osc.connect(gain);gain.connect(audioCtx.destination);
  osc.start();
  active.set(el,{osc,gain});
  dagnySnap();
  snapColor(color);
}
function stopTone(el){
  const t=active.get(el);if(!t)return;
  t.osc.stop(audioCtx.currentTime+0.1);
  active.delete(el);
  if(active.size===0)resetColor();
}

/* quick transient */
function dagnySnap(){
  const len=audioCtx.sampleRate*0.1;
  const buf=audioCtx.createBuffer(1,len,audioCtx.sampleRate);
  const data=buf.getChannelData(0);
  for(let i=0;i<len;i++){data[i]=Math.random()*2-1;}
  const noise=audioCtx.createBufferSource();
  noise.buffer=buf;
  const filt=audioCtx.createBiquadFilter();
  filt.type='highpass';filt.frequency.value=1500;
  const g=audioCtx.createGain();
  g.gain.setValueAtTime(0.15,audioCtx.currentTime);
  g.gain.linearRampToValueAtTime(0,audioCtx.currentTime+0.07);
  noise.connect(filt);filt.connect(g);g.connect(audioCtx.destination);
  noise.start();
  noise.stop(audioCtx.currentTime+0.1);
}

/* snap color instantly */
function snapColor(color){
  ripple.style.background=`radial-gradient(circle at center, ${color} 0%, transparent 60%)`;
  ripple.style.opacity=1;
  document.body.style.transition='none';
  document.body.style.background=`radial-gradient(circle at center, ${color}, ${color} 90%)`;
  clearTimeout(snapColor.timeout);
  snapColor.timeout=setTimeout(()=>{
    ripple.style.opacity=0;resetColor();
  },1000);
}
function resetColor(){
  document.body.style.background='radial-gradient(circle at center, var(--marina-pearl), #fffafc 70%)';
}

orbs.forEach(o=>{
  o.addEventListener('mouseenter',()=>startTone(o));
  o.addEventListener('mouseleave',()=>stopTone(o));
  o.addEventListener('touchstart',()=>startTone(o));
  o.addEventListener('touchend',()=>stopTone(o));
});
</script>
</body>
</html>
